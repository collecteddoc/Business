<script>
    $(document).ready(function() {
        $("#ddlItem").select2({
            matcher: utility.matchCustom,
        });
        $("#ddlBranch").select2({
            matcher: utility.matchCustom,
        });
        $("#ddlParty").select2({
            matcher: utility.matchCustom,
        });
        $("#txtRate").keypress(function() {
            pos.CalculateTotal();
        });
        $("#txtRate").keyup(function() {
            pos.CalculateTotal();
        });
        $("#txtRate").keydown(function() {
            pos.CalculateTotal();
        });
        $("#txtRate").change(function() {
            pos.CalculateTotal();
        });
        $("#txtQuantity").keypress(function() {
            pos.CalculateTotal();
        });
        $("#txtQuantity").keyup(function() {
            pos.CalculateTotal();
        });
        $("#txtQuantity").keydown(function() {
            pos.CalculateTotal();
        });
        $("#txtQuantity").change(function() {
            pos.CalculateTotal();
        });
        $("#txtDiscount").keypress(function() {
            pos.CalculateTotal();
        });
        $("#txtDiscount").keyup(function() {
            pos.CalculateTotal();
        });
        $("#txtDiscount").keydown(function() {
            pos.CalculateTotal();
        });
        $("#txtDiscount").change(function() {
            pos.CalculateTotal();
        });
        $("#btnPrint").hide();

        pos.loadItem("#div_item");
        pos.LoadddlItem();
        transaction.LoadddlBranch();
        pos.LoadddlParty();
        pos.PrepareTable();
        $(document).on("click", ".deleterow", function(event) {
            if ($("#btnSave").is(":disabled")) {
                swal({
                    title: "Unable to remove item in paid invoice",
                    text: "",
                    icon: 'warning',
                    closeOnClickOutside: false
                });
            } else {
                $(this).closest("tr").remove();
                pos.CalculateTotal();
            }
        });

    });
</script>

<div class="row">
    <button id="btnNew" class="btn btn-success col-md-2" style="width:100%" onclick="main.loadpage('/html/inventory/pos.html')">New Order</button> &nbsp;
</div>

<div class="row">
    <label class="col-md-1">Branch:</label>
    <select id="ddlBranch" class="col-md-2"></select> &nbsp; &nbsp;
    <label class="col-md-1">Party:</label>
    <select id="ddlParty" class="col-md-4"></select>&nbsp;&nbsp;
    <div class="col-md-1">Discount</div>
    <input type="number" id="txtDiscount" class="col-md-2 text-right" value=0> &nbsp;tk
</div>

<div class="row">
    <label class="col-md-1">Name:</label>
    <select id="ddlItem" class="col-md-8"></select>
    <button id="btnAdd" class="btn btn-success col-md-1" style="width:100%" onclick="pos.Add($('#ddlItem option:selected').val(), 2);">Add</button> &nbsp;
</div>

<div class="row">
    <div class="col-md-1"><b>Net Total</b></div>
    <div class="col-md-2" id="div_total"></div>
    <div class="col-md-8"></div>
    <button id="btnPrint" class="btn btn-info col-md-1" style="width:100%" onclick="utility.printDiv('div_order_print');">Print</button>
    <button id="btnSave" class="btn btn-success col-md-1" style="width:100%" onclick="pos.Save(2, 1, $('#ddlBranch option:selected').val(), $('#ddlParty option:selected').val());">Paid</button>
</div>

<div class="row">
    <div id="div_order" class="col-md-12" style="border: 1px solid; height: auto; overflow: auto;">
    </div>
    <div id="div_order_print" class="col-md-12" style="border: 1px solid; height: auto; overflow: auto; display: none;">
    </div>
</div>